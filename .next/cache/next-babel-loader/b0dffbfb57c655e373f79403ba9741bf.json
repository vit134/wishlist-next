{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { wishesRequest } from '../../src/requests';\nimport Link from 'next/link';\nimport { Table } from 'react-bootstrap';\nimport { Image } from '../../src/components/image';\n\nvar ProfilePage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ProfilePage, _React$Component);\n\n  function ProfilePage() {\n    _classCallCheck(this, ProfilePage);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ProfilePage).apply(this, arguments));\n  }\n\n  _createClass(ProfilePage, [{\n    key: \"render\",\n    value: function render() {\n      var wishes = this.props.wishes;\n      var _wishes$data = wishes.data,\n          data = _wishes$data === void 0 ? [] : _wishes$data;\n      return __jsx(Table, {\n        striped: true,\n        bordered: true,\n        hover: true\n      }, __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"#\"), __jsx(\"th\", null, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"), __jsx(\"th\", null, \"\\u0426\\u0435\\u043D\\u0430\"), __jsx(\"th\", null, \"\\u0411\\u0440\\u043E\\u043D\\u044C\"))), __jsx(\"tbody\", null, data.map(function (el, ind) {\n        return __jsx(\"tr\", {\n          key: el._id\n        }, __jsx(\"td\", null, ind + 1), __jsx(\"td\", null, el.image && __jsx(\"span\", {\n          style: {\n            display: 'inline-block',\n            maxWidth: '40px',\n            marginRight: '10px'\n          }\n        }, __jsx(Image, {\n          src: el.image,\n          size: 50,\n          crop: true\n        })), __jsx(Link, {\n          href: \"/wish/\".concat(el._id)\n        }, el.name)), __jsx(\"td\", null, el.price), __jsx(\"td\", null, el.assigned && el.assigned));\n      })));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var req, res, data, _res;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                req = _ref.req, res = _ref.res;\n                data = {}; // let props = await super.getInitialProps({ req });\n\n                if (!(req.user && req.user._id)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                _context.prev = 3;\n                _context.next = 6;\n                return wishesRequest(req.user._id);\n\n              case 6:\n                _res = _context.sent;\n                data = _res.data;\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](3);\n                data.err = _context.t0;\n\n              case 13:\n                return _context.abrupt(\"return\", {\n                  wishes: data\n                });\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[3, 10]]);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return ProfilePage;\n}(React.Component);\n\n;\nexport default ProfilePage;","map":{"version":3,"sources":["/Users/viandryushkov/my/ssr-wishlist/pages/profile/index.js"],"names":["React","wishesRequest","Link","Table","Image","ProfilePage","wishes","props","data","map","el","ind","_id","image","display","maxWidth","marginRight","name","price","assigned","req","res","user","err","Component"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,aAAT,QAA8B,oBAA9B;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,KAAT,QAAsB,iBAAtB;AACA,SAASC,KAAT,QAAsB,4BAAtB;;IAEMC,W;;;;;;;;;;;;;6BAiBM;AAAA,UACAC,MADA,GACW,KAAKC,KADhB,CACAD,MADA;AAAA,yBAEcA,MAFd,CAEAE,IAFA;AAAA,UAEAA,IAFA,6BAEO,EAFP;AAIR,aACE,MAAC,KAAD;AAAO,QAAA,OAAO,MAAd;AAAe,QAAA,QAAQ,MAAvB;AAAwB,QAAA,KAAK;AAA7B,SACE,qBACE,kBACE,sBADF,EAEE,qEAFF,EAGE,6CAHF,EAIE,mDAJF,CADF,CADF,EASE,qBAEIA,IAAI,CAACC,GAAL,CAAS,UAACC,EAAD,EAAKC,GAAL,EAAa;AACpB,eACE;AAAI,UAAA,GAAG,EAAED,EAAE,CAACE;AAAZ,WACE,kBAAKD,GAAG,GAAG,CAAX,CADF,EAEE,kBACGD,EAAE,CAACG,KAAH,IACC;AAAM,UAAA,KAAK,EAAE;AAAEC,YAAAA,OAAO,EAAE,cAAX;AAA2BC,YAAAA,QAAQ,EAAE,MAArC;AAA6CC,YAAAA,WAAW,EAAE;AAA1D;AAAb,WACE,MAAC,KAAD;AAAO,UAAA,GAAG,EAAEN,EAAE,CAACG,KAAf;AAAsB,UAAA,IAAI,EAAE,EAA5B;AAAgC,UAAA,IAAI;AAApC,UADF,CAFJ,EAME,MAAC,IAAD;AAAM,UAAA,IAAI,kBAAWH,EAAE,CAACE,GAAd;AAAV,WAAiCF,EAAE,CAACO,IAApC,CANF,CAFF,EASE,kBAAMP,EAAE,CAACQ,KAAT,CATF,EAUE,kBAAMR,EAAE,CAACS,QAAH,IAAeT,EAAE,CAACS,QAAxB,CAVF,CADF;AAcD,OAfD,CAFJ,CATF,CADF;AAgCD;;;;;;;;;;;;;AApD+BC,gBAAAA,G,QAAAA,G,EAAKC,G,QAAAA,G;AAC/Bb,gBAAAA,I,GAAO,E,EAEX;;sBACIY,GAAG,CAACE,IAAJ,IAAYF,GAAG,CAACE,IAAJ,CAASV,G;;;;;;;uBAEHX,aAAa,CAACmB,GAAG,CAACE,IAAJ,CAASV,GAAV,C;;;AAAzBS,gBAAAA,I;AACNb,gBAAAA,IAAI,GAAGa,IAAG,CAACb,IAAX;;;;;;;AAEAA,gBAAAA,IAAI,CAACe,GAAL;;;iDAIG;AAAEjB,kBAAAA,MAAM,EAAEE;AAAV,iB;;;;;;;;;;;;;;;;;;;EAdeR,KAAK,CAACwB,S;;AAsD/B;AAED,eAAenB,WAAf","sourcesContent":["import React from 'react';\nimport { wishesRequest } from '../../src/requests';\nimport Link from 'next/link';\nimport { Table } from 'react-bootstrap';\nimport { Image } from '../../src/components/image';\n\nclass ProfilePage extends React.Component {\n  static async getInitialProps ({ req, res }) {\n    let data = {};\n\n    // let props = await super.getInitialProps({ req });\n    if (req.user && req.user._id) {\n      try {\n        const res = await wishesRequest(req.user._id);\n        data = res.data;\n      } catch (e) {\n        data.err = e;\n      }\n    }\n\n    return { wishes: data };\n  }\n\n  render () {\n    const { wishes } = this.props;\n    const { data = [] } = wishes;\n\n    return (\n      <Table striped bordered hover>\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Название</th>\n            <th>Цена</th>\n            <th>Бронь</th>\n          </tr>\n        </thead>\n        <tbody>\n          {\n            data.map((el, ind) => {\n              return (\n                <tr key={el._id}>\n                  <td>{ind + 1}</td>\n                  <td>\n                    {el.image && (\n                      <span style={{ display: 'inline-block', maxWidth: '40px', marginRight: '10px' }}>\n                        <Image src={el.image} size={50} crop/>\n                      </span>\n                    )}\n                    <Link href={`/wish/${el._id}`}>{ el.name }</Link></td>\n                  <td>{ el.price }</td>\n                  <td>{ el.assigned && el.assigned }</td>\n                </tr>\n              );\n            })\n          }\n        </tbody>\n      </Table>\n    );\n  }\n};\n\nexport default ProfilePage;\n"]},"metadata":{},"sourceType":"module"}